from nilearn import surface, datasets, plotting, image

# Load your statistical map (NIfTI file)
img = image.load_img('/Volumes/Transcend/results_filter/rsa/maps/mm_pattern_corr_imp_100_realdiff_dm.nii')  # replace with your path

# Load fsaverage surface
fsaverage = datasets.fetch_surf_fsaverage(mesh='fsaverage5')

# Project volumetric data onto the surface
texture_left = surface.vol_to_surf(img, fsaverage.pial_left)
texture_right = surface.vol_to_surf(img, fsaverage.pial_right)

# Plot outer surface (lateral)
plotting.plot_surf_stat_map(
    fsaverage.infl_left, texture_left,
    hemi='left', view='lateral',
    title='Left Hemisphere (Lateral)', 
    colorbar=True,
    threshold=0.00,
    bg_on_data=True, # 顯示大腦背景（避免透明網格感）
    darkness=1 # 控制背景亮度，0 是全白，1 是全黑
)

plotting.plot_surf_stat_map(
    fsaverage.infl_right, texture_right,
    hemi='right', view='lateral',
    title='Right Hemisphere (Lateral)', 
    colorbar=True,
    threshold=0.00,
    bg_on_data=True,
    darkness=1
)

# Plot inner surface (medial)
plotting.plot_surf_stat_map(
    fsaverage.infl_left, texture_left,
    hemi='left', view='medial',
    title='Left Hemisphere (Medial)',
    colorbar=True,
    threshold=0.00,
    bg_on_data=True,
    darkness=1
)

plotting.plot_surf_stat_map(
    fsaverage.infl_right, texture_right,
    hemi='right', view='medial',
    title='Right Hemisphere (Medial)',
    colorbar=True,
    threshold=0.00,
    bg_on_data=True,
    darkness=1
)

plotting.show()
